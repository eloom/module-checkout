define(["jquery","Eloom_Checkout/js/action/check-taxvat-availability","Magento_Checkout/js/model/full-screen-loader"],function(a,e,c){a.widget("mage.EloomCustomerTaxVat",{options:{selectors:{taxvat:"#taxvat"}},_init:function(){var f=this,b=a(this.options.selectors.taxvat);b.data("unique-taxvat")||(b.data("unique-taxvat",!0).metadata().validate["validate-unique-taxvat"]=!0,b.blur(function(){c.startLoader();var d=a.Deferred();e(d,b.val());a.when(d).done(function(){b.removeClass("unique-taxvat-error").next(".unique-taxvat-error").remove();
a("form.account.form-create-account button.action.primary").prop("disabled",!1)}.bind(this)).fail(function(){0==b.next(".unique-taxvat-error").length&&(b.addClass("unique-taxvat-error").after('<div class="mage-error unique-taxvat-error" data-bind="attr: { id: element.errorId }, text: element.error" generated="true" id="unique-taxvat-error">'+f.options.config.messages.taxvat+"</div>"),a("form.account.form-create-account button.action.primary").prop("disabled",!0))}.bind(this)).always(function(){c.stopLoader()}.bind(this))}))}});
return a.mage.EloomCustomerTaxVat});
